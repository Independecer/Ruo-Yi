<template>
    <view scroll-y class="consultant-list-box">
        <view class="consultant-item" v-if="consultantList.length > 0" v-for="consultant in consultantList" :style="consultant.indexQualification ? { background: 'url(/static/consult/bg.png) 100% no-repeat', backgroundSize: '100% 100%'} : {}">
          <view class="header-icon" v-if="consultant.indexQualification">
            <image src="/static/consult/crown.png" class="header-icon-img"/>
            <text class="header-icon-text">{{ consultant.indexQualification }}</text>
          </view>
          <view class="upper-box">
            <view class="img-box" @tap="toConsultant(consultant)" :style="{ background: `url(${consultant.img}) 100% no-repeat`, backgroundSize: '100% 100%'}">
                <view v-if="consultant.buy > 0" class="img-tab">今日可约</view>
            </view>
            <view class="txt-box">
              <view class="title" @tap="toConsultant(consultant)">
                <view class="name">{{ consultant.nickName }}</view>
              </view>
              <view v-if="consultant.mode" class="info-mode">
                <text>{{ consultant.mode }}</text>
                <text class="info-mode-work">已有<text class="info-mode-work-val">{{ consultant.workNum }}人</text>预约</text>
              </view>
              <view @tap="toConsultant(consultant)" class="introduce txt-overflow">{{ consultant.info }}</view>
              <view @tap="toConsultant(consultant)" class="title">
                <view v-for="(tag, index) in consultant.tabs.split(',')" class="tag-list">
                  <view v-if="index < 3" class="tag-item">{{ tag }}</view>
                </view>
              </view>

              <view class="bottom-box">
                <view class="gps" v-if="consultant.province">
                  <image src="/static/consult/gps-black.png" />
                  <text>{{ consultant.province + '-' + consultant.city }}</text>
                </view>

                <view class="consult-button" @tap="toConsultant(consultant)">
                  {{ consultant.newPrice ? '¥' + consultant.newPrice.toFixed(2) : consultant.price ? '¥' + consultant.price.toFixed(2) : '咨询TA' }}
                </view>
              </view>
            </view>
          </view>
        </view>
        <view class="footer" v-show="consultantList.length > 0">已经到底了</view>
    </view>
</template>
<script>
export default {
    props: ['consultantList'],
    data() {
        return {
        }
    },
    methods: {
        toConsultant(consultant) {
          this.$emit('toConsultant', consultant.id)
        },
        loadMore() {
          // console.log(1122)
          this.$emit('loadMore')
        },
    }
}
</script>
<style lang="scss" scoped>
@import "@/style/common.scss";
.consultant-list-box {
  //height: 1000upx;
  .consultant-item {
      position: relative;
      background: #ffffff;
      border-radius: 12upx;
      margin-bottom: 16upx;
      padding: 24upx;
      height: 264upx;
      .header-icon {
        position: absolute;
        top: 18upx;
        left: 420upx;
        height: 20upx;
        line-height: 20upx;
        .header-icon-img {
          width: 21upx;
          height: 20upx;
        }
        .header-icon-text {
          margin-left: 10upx;
          font-size: 22upx;
          font-weight: 500;
          color: #CA7C00;
        }
      }
      .upper-box {
        display: flex;
        .img-box {
            position: relative;
            width: 172upx;
            height: 264upx;
            border-radius: 12upx;
          .img-tab {
            text-align: center;
            position: absolute;
            border-radius: 0 0 12upx 12upx;
            bottom: 0;
            color: #fff;
            width: 172upx;
            height: 48upx;
            line-height: 48upx;
            font-size: 24upx;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(6upx);
          }
        }
        .txt-box {
          width: 450upx;
          //height: 248upx;
          display: flex;
          flex-direction: column;
          margin-left: 24upx;
          .title {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            .name {
              font-size: 30upx;
              font-family: PingFangSC-Semibold, PingFang SC;
              font-weight: 600;
              color: #333333;
              line-height: 42upx;
              margin-right: 14upx;
            }
          }
          .introduce {
            font-size: 26upx;
            //font-weight: 400;
            color: #777777;
            margin-bottom: 10upx;
          }
          .tag-list {
            .tag-item {
              background: rgba(255,112,63,0.1);
              border-radius: 4upx;
              margin-right: 8upx;
              margin-bottom: 8upx;
              font-size: 22upx;
              font-weight: 400;
              color: #FF703F;
              line-height: 30upx;
              padding: 2upx 10upx;
            }
          }
          .info-mode {
            margin: 8upx 0;
            height: 33upx;
            font-size: 24upx;
            font-weight: 400;
            color: #AAAAAA;
            line-height: 33upx;
            position: relative;
            .info-mode-work {
              font-size: 22upx;
              position: absolute;
              right: 0;
            }
            .info-mode-work-val {
              color: #FF703F;
            }
          }
          .bottom-box {
            .gps {
              height: 30upx;
              line-height: 30upx;
              margin: 8upx 0;
              position: absolute;
              bottom: 33upx;
              image {
                width: 16upx;
                height: 18upx;
              }
              text {
                margin-left: 6upx;
                font-size: 22upx;
                font-weight: 400;
                color: #777777;
              }
            }

            .consult-button {
              position: absolute;
              bottom: 24upx;
              right: 24upx;
              width: fit-content;
              height: fit-content;
              border-radius: 25upx;
              border: 1upx solid #FF703F;
              padding: 8upx 20upx;
              font-size: 24upx;
              font-family: PingFangSC-Regular, PingFang SC;
              font-weight: 400;
              color: #FF703F;
              text-align: center;
            }
          }
        }
      }
  }
}

</style>